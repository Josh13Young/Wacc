image: sbtscala/scala-sbt:openjdk-17.0.2_1.8.1_2.13.10

stages:
  - build
  - test

build-job:
  stage: build
  script:
    - sbt compile

parser-test-job:
  stage: test
  script:
    - sbt "testOnly wacc.ParserTest"

parser-basic-test:
  stage: test
  script:
    - sbt "testOnly wacc.basicTest"

parser-advanced-test:
  stage: test
  script:
    - sbt "testOnly wacc.functionTest"
    - sbt "testOnly wacc.arrayTest"
    - sbt "testOnly wacc.pairTest"

error-test:
  stage: test
  script: 
    - sbt "testOnly wacc.errorTest"

semantic-test:
  stage: test
  script:
    - sbt "testOnly wacc.arraySemanticTest"
    - sbt "testOnly wacc.exitTest"
    - sbt "testOnly wacc.IOTest"
    - sbt "testOnly wacc.multipleTest"
    - sbt "testOnly wacc.readTest"
